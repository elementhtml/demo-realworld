<style></style>
<template>
    <meta is="e-data" transform='{
        "`.article-meta a{}`@href": "./#profile/" & $.author.username, 
        "`.article-meta img`"@src: $.author.image
        "`.article-meta .author`": $.author.username, 
        "`.article-meta .date`": $.updatedOn, 
        "`.article-meta .favorites-count`": $.favoritesCount, 
        "`.preview-link`"@href: "./#article/" & $host.`@slug`, 
        "`preview-link h1`": $.title, 
        "`preview-link p`": $.description, 
        "`preview-link .tagList`": $.tagList
    }'>
    <div class="article-meta">
        <a href><img src /></a>
        <div class="info">
            <a href class="author"></a>
            <span class="date"></span>
        </div>
        <button class="btn btn-outline-primary btn-sm pull-xs-right">
            <i class="ion-heart"></i> <span class="favorites-count"></span>
        </button>
    </div>
    <a href class="preview-link">
        <h1></h1>
        <p></p>
        <span>Read more...</span>
        <ul class="tag-list">
            <template>
                <li class="tag-default tag-pill tag-outline"></li>
            </template>
        </ul>
    </a>
</template>
<script>
    export default class extends `` {

        #slug

        constructor() {
            super()
        }

        static get observedAttributes() { return (super.observedAttributes || []).concat('slug') }

        get slug() { return this.#slug }
        set slug(value) {
            if (!value || !value.trim() || (value === this.#slug)) return
            this.#slug = value
            let dataPointer = this.shadowRoot.querySelector('meta[is="e-data"]')
            if (!dataPointer) {
                dataPointer = document.createElement('meta')
                dataPointer.setAttribute('is', 'e-data')
                this.shadowRoot.prepend(dataPointer)
            }
            dataPointer.setAttribute('resource', `api://articles/${this.#slug}`)
        }

    }
</script>