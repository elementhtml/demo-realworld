<style></style>
<template></template>
<script>
    export default class extends `` {

        #slug
        #author = {}
        #updatedOn
        #favoritesCount = 0
        #title
        #description
        #tagList = []

        constructor() {
            super()
        }

        static get observedAttributes() { return (super.observedAttributes || []).concat('slug') }

        get tagList() { return this.#tagList }
        set tagList(value) {
            if (!value || !Array.isArray(value)) return
            this.E.sinkData(this.shadowRoot.querySelector('.preview-link .tagList'), value)
            this.#tagList = value
        }

        get description() { return this.#description }
        set description(value) {
            if (!value || !value.trim() || (value === this.#description)) return
            value = value.trim()
            this.shadowRoot.querySelector('.preview-link p').textContent = value
            this.#description = value
        }

        get title() { return this.#title }
        set title(value) {
            if (!value || !value.trim() || (value === this.#title)) return
            value = value.trim()
            this.shadowRoot.querySelector('.preview-link h1').textContent = value
            this.#title = value
        }

        get slug() { return this.#slug }
        set slug(value) {
            if (!value || !value.trim() || (value === this.#slug)) return
            value = value.trim()
            this.shadowRoot.querySelector('.preview-link').setAttribute('href', `./#article/${value}`)
            this.#slug = value
        }

        get author() { return this.#author }
        set author(value) {
            if (!value || !(value instanceof Object) || !value.username || !value.image) return
            const articleMeta = this.shadowRoot.querySelector('.article-meta')
            for (const a of articleMeta.querySelectorAll('a')) a.setAttribute('href', `./#profile/${value.username}`)
            articleMeta.querySelector('.author').textContent = value.username
            articleMeta.querySelector('img').setAttribute('src', value.image)
            this.#author = value
        }

        get updatedOn() { return this.#updatedOn }
        set updatedOn(value) {
            if (!value || (value === this.#updatedOn)) return
            this.shadowRoot.querySelector('.article-meta .date').textContent = value
            this.#updatedOn = value
        }

        get favoritesCount() { return this.#favoritesCount }
        set favoritesCount(value) {
            if (isNaN(parseInt(value)) || (value === this.#favoritesCount)) return
            this.shadowRoot.querySelector('.article-meta .favorites-count').textContent = value
            this.#favoritesCount = value
        }

    }
</script>