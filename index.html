<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>ElementHTML â€¢ RealWorld</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="preconnect" href="//code.ionicframework.com" crossorigin>
    <link rel="preconnect" href="//demo.productionready.io" crossorigin>

    <link rel="preload" as="style"
        href="//fonts.googleapis.com/css?family=Titillium+Web:700|Source+Serif+Pro:400,700|Merriweather+Sans:400,700|Source+Sans+Pro:400,300,600,700,300italic,400italic,600italic,700italic&display=swap">
    <link rel="preload" as="style" href="//code.ionicframework.com/ionicons/2.0.1/css/ionicons.min.css">
    <link rel="preload" as="style" href="//demo.productionready.io/main.css">
    <link rel="preload" as="style" href="theme/dark.css">

    <link href="//code.ionicframework.com/ionicons/2.0.1/css/ionicons.min.css" rel="stylesheet" type="text/css" />
    <link
        href="//fonts.googleapis.com/css?family=Titillium+Web:700|Source+Serif+Pro:400,700|Merriweather+Sans:400,700|Source+Sans+Pro:400,300,600,700,300italic,400italic,600italic,700italic&display=swap"
        rel="stylesheet" type="text/css" />
    <link rel="stylesheet" href="//demo.productionready.io/main.css" />
    <link rel="stylesheet" href="theme/dark.css" />

    <script type="importmap">
        {
            "imports": {
                "rw": "./packages/rw.js"
            }
        }
    </script>
    <script type="module" src='../element/element.js?load&expose&packages=rw'></script>
    <!-- <script type="module"
        src='https://cdn.jsdelivr.net/gh/elementhtml/element@8aca9f1a13c3230a1b607d06f2e1675a24f54069/element.js?load&expose&packages=rw'></script> -->

    <script is="e-flow" type="script/flow" id="index">
        `localStorage.getItem(user)` >> #user >> `localStorage.setItem(user, ${})`
        !# >> /\/([a-z0-9\-]+)\/?/ ?? "home" >> ~~templates/${}.html~~ >> ($.ok ? { "<>": $._ } : $context.`404`) >> $(:|main)
        #user ?? {} >> (`transforms/mainnav.jsonata`) >> $(#mainnav)
        # config: #feedConfig >> api: ${~api}/$.endpoint?limit=${limit}&offset=${offset}&tag=${tag}&author=${author}&favorited=${favorited} 
            >> ({ "#feed": $.articles, "#pagination": { "count": $.articlesCount, "offset": $config.offset, "limit": $config.limit } })
            >> #{feed, pagination}
        # #feed >> (`transforms/article-list.jsonata`) >> $(:|.article-list)
        # #pagination >> (`transforms/pagination.jsonata`) >> $(:|.pagination)
        # $(:|.pagination li a) >> ($merge([$cell("feedConfig"), {"offset": $.`@data-offset`, "limit": $.`@data-limit`}])) >> #feedConfig 
            >> {"<p>": "Loading articles..."} >> $(:|.article-list)
        # $(:|.tag-list a) >> tag: ($.textContent) >> (`transforms/set-tag.jsonata`) >> $() >> ({"tag": $tag, "offset": 0}) >> #feedConfig
        # $(:|.article-preview .btn-outline-primary,.article-preview .btn-outline-primary *) >> slug: ($seek(".article-preview|").id) 
            >> api: ${~api}/articles/${slug}/favorite
    </script>
    <script>
        window.setTimeout(() => {

            window.test = document.getElementById('register')
            window.setTimeout(() => {
                console.log({
                    handlers: test.handlers.map(h => `${h}`),
                    cellNames: test.cellNames,
                    fieldNames: test.fieldNames,
                    fields: test.fields,
                    statements: test.statements,
                    init: test.init
                })
            }, 500)
            // test.addEventListener('done-0-0', event => console.log('done-0-0', event))
            // test.addEventListener('done-2-1', event => console.log('done-2-1', event))
            // test.addEventListener('done-2-2', event => console.log('done-2-2', event))

        }, 500)
    </script>
    <template id="feed-article-preview">
        <div class="article-preview">
            <div class="article-meta">
                <a href><img src /></a>
                <div class="info">
                    <a href class="author"></a>
                    <span class="date"></span>
                </div>
                <button class="btn btn-outline-primary btn-sm pull-xs-right">
                    <i class="ion-heart"></i> <span class="favorites-count"></span>
                </button>
            </div>
            <a href class="preview-link">
                <h1></h1>
                <p></p>
                <span>Read more...</span>
                <ul class="tag-list"></ul>
            </a>
        </div>
    </template>

</head>

<body>
    <header>
        <nav class="navbar navbar-light">
            <div class="container">
                <a class="navbar-brand" href="./">conduit</a>
                <ul class="nav navbar-nav pull-xs-right" id="mainnav">
                    <li class="nav-item">
                        <a class="nav-link active" href="#/">Home</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#/login"></a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#/register"></a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#/editor"></a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#/settings"></a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#/profile/"></a>
                    </li>
                </ul>
            </div>
        </nav>
    </header>

    <main></main>

    <footer>
        <div class="container">
            <a href="./" class="logo-font">conduit</a>
            <span class="attribution">
                An interactive learning project from <a href="https://thinkster.io">Thinkster</a>. Code &amp;
                design licensed under MIT.
            </span>
        </div>
    </footer>
</body>

</html>